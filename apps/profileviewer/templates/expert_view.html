{% extends "frame.html" %}
{% block extra_header %}
  <!--<script src="/static/bower_components/sticky-kit/jquery.sticky-kit.js" type="text/javascript" charset="utf-8"></script>-->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4oLS7DjhME0pLuTTauJw3rjs1_n4TuKM&sensor=false" type="text/javascript" charset="utf-8"></script>
  <script src="/static/js/profileviewer/expert_view/d3.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="/static/js/profileviewer/crossfilter.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="/static/js/profileviewer/dc.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="/static/js/profileviewer/gmaps.js" type="text/javascript" charset="utf-8"></script>
  <script src="/static/js/profileviewer/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
  <script src="/static/js/profileviewer/jquery-uuid.js" type="text/javascript" charset="utf-8"></script>
  <script src="/static/js/profileviewer/expert_view.js" type="text/javascript" charset="utf-8"></script>

  <link rel="stylesheet" href="/static/css/profileviewer/dc.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
      profileviewer_ns.initCharts("{{ screen_name | safe }}");
      if(! $.cookie('judger')){
        $.cookie('judge', JSON.stringify({jid: $.uuid()}), {expires: 90, path: "/"});
      }
      <!--$("#judgment-panel").stick_in_parent();-->
    });
  </script>
  <style type="text/css" media="screen">
    a:hover {
      cursor: pointer;
      text-decoration: none;
    }
    .chart-label {
      cursor: help;
      text-align: center;
    }
    .btn-float-right {
      float: right;
    }
    .btn-radio.active, .btn-radio:active {
      background-color: #428bca;
      color: white;
    }
  </style>
{% endblock %}
{% block content %}
<div id="judgment-panel" class="panel panel-default" style="z-index: 100">
  <div class="panel-heading">
    <b>
      How likely is
      <a href="https://twitter.com/{{screen_name | safe}}" target="_blank">
        @{{screen_name | safe}}
      </a> an expert knowing about
    </b>
  </div>
  <div class="panel-body">
    <form action="/judge_expert" method="post" accept-charset="utf-8" role="form">
      <input type="hidden" name="exp_id" value="{{ exp_id }}">
      {% csrf_token %}
      <div class="list-group">
        {% for t in expertise %}
        <div class="list-group-item">
          <div class="row">
            <div class="col-sm-9">
              <b>{{ t.topic }}</b> in <b>{{ t.region }}</b>?
            </div>
            <div class="col-sm-3" align="right">
              <abbr title="He/she probably knows nothing">Unlikely</abbr>&nbsp;
              <div class="btn-group btn-group-xs" data-toggle="buttons">
                <label class="btn btn-default btn-radio" for="">
                  <input type="radio" name="judgments-{{ t.topic_id  }}" value="1"> &nbsp;1&nbsp;
                </label>
                <label class="btn btn-default btn-radio" for="">
                  <input type="radio" name="judgments-{{ t.topic_id  }}" value="2"> &nbsp;2&nbsp;
                </label>
                <label class="btn btn-default btn-radio" for="">
                  <input type="radio" name="judgments-{{ t.topic_id  }}" value="3"> &nbsp;3&nbsp;
                </label>
                <label class="btn btn-default btn-radio" for="">
                  <input type="radio" name="judgments-{{ t.topic_id  }}" value="4"> &nbsp;4&nbsp;
                </label>
                <label class="btn btn-default btn-radio" for="">
                  <input type="radio" name="judgments-{{ t.topic_id  }}" value="5"> &nbsp;5&nbsp;
                </label>
              </div>
              &nbsp;<abbr title="He/she definately knows a lot.">Likely</abbr>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="row">
        <div class="col-sm-12">
          <button type="submit" class="btn btn-primary btn-xs btn-float-right">Submit &amp; Continue</button>
        </div>
      </div>
    </form>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    <div class="row">
      <div class="col-sm-12">
        <b>Statistics</b>
        <div class="btn-toolbar btn-float-right">
          <div class="btn-group">
            {% for k, t in focus.items %}
            <button type="button" class="btn btn-default btn-xs" onClick="profileviewer_ns.focusTopic('{{ k.value }}', '{{ k.chart }}')" title="{{ t }}">
              <span class="glyphicon glyphicon-search"></span> {{ k.name }}
            </button>
            {% endfor %}
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-default btn-xs" onClick="dc.filterAll();dc.redrawAll();" title="Remove all filters currently applied." >
              <span class="glyphicon glyphicon-repeat"></span> Reset
            </button>
          </div>
        </div>
      </div>
      <div class="col-sm-1">
      </div>
    </div>
  </div>
  <div class="panel-body">
    <div class="row">
      <div class="col-sm-3">
        <div class="panel panel-info" title="This chart shows the number of check-ins at each major category of places.">
          <div class="panel-body">
            <div id="chart-zcate-pie" > </div>
          </div>
          <div class="panel-footer chart-label"> Major Categories </div>
        </div>
      </div>
      <div class="col-sm-3">
        <div class="panel panel-info" title="This chart is similar to the one showing major category distribution except that it is for minor categories.">
          <div class="panel-body">
            <div id="chart-cate-pie"> </div>
          </div>
          <div class="panel-footer chart-label"> Minor Categories </div>
        </div>
      </div>
      <div class="col-sm-3">
        <div class="panel panel-info" title="This chart shows the number of check-ins the candidate have made at each place.">
          <div class="panel-body">
            <div id="chart-poi-pie"> </div>
          </div>
          <div class="panel-footer chart-label"> Locations </div>
        </div>
      </div>
      <div class="col-sm-3">
        <div class="panel panel-info" title="This chart shows the number of check-ins that were made at each of 4 cities.">
          <div class="panel-body">
            <div id="chart-region-pie"> </div>
          </div>
          <div class="panel-footer chart-label"> Regions </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div class="panel panel-info" title="This chart shows the number of check-ins per week.">
          <div class="panel-heading"> Check-ins per week (after filtering)</div>
          <div class="panel-body">
            <div id="chart-timeline"> </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-info" title="The top 30 popular places from the candidate are marked on the map.">
      <div class="panel-heading">
        Top 30 places (after filtering)
      </div>
      <div class="panel-body">
        <div id="map-canvas" style="height: 500px;width: 100%"></div>
      </div>
    </div>
  </div>
</div>
<!--<div class="footer">-->
  <!--<p> If you have any complaints or suggestions, please do not hesitate to contact us. <a href="mailto:wen.li@tudelft.nl?subject=Feedback%20on%20Geoexpert%20Judging%20System">Wen Li</a></p>-->
<!--</div>-->
{% endblock %}
